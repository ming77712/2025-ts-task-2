import{a as k,b as w}from"./products-kRVN6oJY.js";import{f as C,h as i,g as S,i as P,c as n,a as t,F as c,j as b,n as v,t as d,b as $,w as j,e as g,r as B,o as r}from"./index-C5-iHmpz.js";const D={class:"container mt-md-5 mt-3 mb-7"},L={class:"row"},T={class:"col-md-4"},V={class:"accordion border border-bottom border-top-0 border-start-0 border-end-0 mb-3",id:"accordionExample"},z={class:"card border-0"},A={id:"collapseOne",class:"collapse show","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},G={class:"card-body py-0"},M={class:"list-unstyled"},O=["onClick"],E={class:"col-md-8"},H={class:"row"},W={class:"card border-0 mb-4 position-relative position-relative"},F=["src"],I={class:"card-body p-0"},N={class:"mb-0 mt-3"},R={class:"card-text mb-0"},q={class:"text-muted"},U={class:"d-flex justify-content-center"},Y={class:"pagination"},J={class:"page-item"},K=["disabled"],Q=["onClick","disabled"],X={class:"page-item"},Z=["disabled"],ot=C({__name:"ProductsView",setup(tt){const o=i("1"),u=i(""),_=i([]),p=i([]),l=i({total_pages:0,current_page:0,has_pre:!1,has_next:!1,category:""}),m=async()=>{try{const a=await k({page:o.value,category:u.value});_.value=a.data.products,l.value=a.data.pagination}catch{alert("取得產品列表失敗")}},h=async()=>{try{const a=await w();p.value=a.data.products}catch{alert("取得所有產品列表失敗")}};S(()=>{m(),h()});const y=P(()=>p.value?[...new Set(p.value.map(s=>s.category))]:[]);return(a,s)=>{const f=B("RouterLink");return r(),n(c,null,[s[7]||(s[7]=t("div",{class:"position-relative d-flex align-items-center justify-content-center",style:{"min-height":"400px"}},[t("div",{class:"position-absolute",style:{top:"0",bottom:"0",left:"0",right:"0","background-image":"url(https://images.unsplash.com/photo-1656275537622-7837184a0dcc?q=80&w=1350&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D)","background-position":"center center","background-size":"cover","background-repeat":"no-repeat",opacity:"0.1"}}),t("h2",{class:"fw-bold"},"產品列表")],-1)),t("div",D,[t("div",L,[t("div",T,[t("div",V,[t("div",z,[s[3]||(s[3]=t("div",{class:"card-header px-0 py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0 rounded-0",id:"headingOne","data-bs-toggle":"collapse","data-bs-target":"#collapseOne"},[t("div",{class:"d-flex justify-content-between align-items-center pe-1"},[t("h4",{class:"mb-0"},"分類"),t("i",{class:"fas fa-chevron-down"})])],-1)),t("div",A,[t("div",G,[t("ul",M,[t("li",null,[t("button",{onClick:s[0]||(s[0]=e=>u.value=""),class:"d-block py-2 border-0 bg-transparent text-muted",type:"button"}," 全部 ")]),(r(!0),n(c,null,b(y.value,e=>(r(),n("li",{key:e},[t("button",{onClick:x=>u.value=e,class:"d-block py-2 border-0 bg-transparent text-muted",type:"button"},d(e),9,O)]))),128))])])])])])]),t("div",E,[t("div",H,[(r(!0),n(c,null,b(_.value,e=>(r(),n("div",{key:e.id,class:"col-md-6"},[t("div",W,[t("img",{style:{height:"320px"},src:e.imageUrl,class:"card-img-top object-fit-cover rounded-0",alt:"琴葉榕"},null,8,F),s[4]||(s[4]=t("button",{type:"button",class:"position-absolute text-dark border-0 bg-transparent",style:{right:"16px",top:"16px"}},[t("i",{class:"far fa-heart"})],-1)),t("div",I,[t("h4",N,[$(f,{to:`/products/${e.id}`},{default:j(()=>[g(d(e.title),1)]),_:2},1032,["to"])]),t("p",R,[g(" NT$"+d(e.price?.toLocaleString("zh-TW"))+" ",1),t("span",q,[t("del",null,"NT$"+d(e.origin_price?.toLocaleString("zh-TW")),1)])])])])]))),128))]),t("nav",U,[t("ul",Y,[t("li",J,[t("button",{onClick:s[1]||(s[1]=e=>o.value=(parseInt(o.value)-1).toString()),disabled:!l.value?.has_pre,type:"button",class:v(["page-link",{disabled:!l.value?.has_pre}]),"aria-label":"Previous"},[...s[5]||(s[5]=[t("span",{"aria-hidden":"true"},"«",-1)])],10,K)]),(r(!0),n(c,null,b(l.value?.total_pages,e=>(r(),n("li",{key:e,class:v(["page-item",{active:o.value===e.toString()}])},[t("button",{onClick:x=>o.value=e.toString(),disabled:o.value===e.toString(),class:"page-link",type:"button"},d(e),9,Q)],2))),128)),t("li",X,[t("button",{onClick:s[2]||(s[2]=e=>o.value=(parseInt(o.value)+1).toString()),disabled:!l.value?.has_next,class:v(["page-link",{disabled:!l.value?.has_next}]),type:"button","aria-label":"Next"},[...s[6]||(s[6]=[t("span",{"aria-hidden":"true"},"»",-1)])],10,Z)])])])])])])],64)}}});export{ot as default};
