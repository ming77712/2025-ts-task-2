import{B as d,E as l,h as i}from"./index-C5-iHmpz.js";const u="https://ec-course-api.hexschool.io",o="ming777",e=d.create({baseURL:u});e.interceptors.request.use(t=>t,t=>Promise.reject(t));e.interceptors.response.use(t=>Promise.resolve(t),t=>Promise.reject(t.response.data));const p=()=>e.get(`/v2/api/${o}/cart`),y=t=>e.post(`/v2/api/${o}/cart`,{data:t}),m=t=>{const{id:r,...c}=t;return e.put(`/v2/api/${o}/cart/${r}`,{data:c})},C=t=>e.delete(`/v2/api/${o}/cart/${t}`),w=l("cart",()=>{const t=i({carts:[],total:0,final_total:0}),r=i(!1),c=i(!1),s=async()=>{try{const a=await p();t.value=a.data.data}catch{alert("取得購物車失敗")}};return{cart:t,isUpdating:r,isDeleting:c,getCart:s,addCartItem:async a=>{try{await y({product_id:a.product_id,qty:a.qty}),await s()}catch{alert("加入購物車失敗")}},updataCartItem:async a=>{try{r.value=!0,await m({id:a.id,product_id:a.product_id,qty:a.qty}),await s()}catch{alert("更新購物車失敗")}finally{r.value=!1}},deleteCartItem:async a=>{try{c.value=!0,await C(a),await s()}catch{alert("刪除購物車項目失敗")}finally{c.value=!1}}}});export{w as u};
